<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>إحصائيات وسوم النظام</title>
    <link rel="stylesheet" href="../style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      .stats-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        margin-bottom: 20px;
      }

      .stats-header-left {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .performance-section {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        margin-bottom: 30px;
      }

      .performance-title {
        font-size: 18px;
        font-weight: 600;
        color: #333;
        margin-bottom: 20px;
      }

      .performance-stats {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        margin-bottom: 25px;
        padding: 0;
        background: transparent;
      }

      .performance-stat-item {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 10px;
        text-align: center;
      }

      .performance-stat-content {
        width: 100%;
      }

      .performance-stat-label {
        font-size: 12px;
        color: #666;
        margin-bottom: 4px;
        font-weight: 500;
      }

      .performance-stat-value {
        font-size: 18px;
        font-weight: 600;
        color: #333;
      }

      .performance-stat-value.danger {
        color: #dc3545;
      }

      .chart-container {
        height: 300px;
        position: relative;
      }

      @media (max-width: 1200px) {
        .performance-stats {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      @media (max-width: 768px) {
        .performance-stats {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>

  <body>
    <div class="wd-container">
      <!-- القسم الأول: القائمة الجانبية -->
      <aside class="wd-sidebar">
        <div class="wd-logo">
          <img src="../imgs/logo.png" alt="شعار المنصة" />
        </div>
        <nav class="wd-nav">
          <ul>
            <li class="wd-nav-item active">
              <i class="fa-solid fa-gauge"></i>
              <span
                ><a href="../index.html" class="wd-nav-link"
                  >لوحة التحكم</a
                ></span
              >
            </li>
            <li class="wd-nav-item">
              <i class="fa-solid fa-comments"></i>
              <span
                ><a href="../chat.html" class="wd-nav-link">المحادثات</a></span
              >
            </li>
            <li class="wd-nav-item">
              <i class="fa-solid fa-users"></i>
              <span
                ><a href="../contacts.html" class="wd-nav-link"
                  >جهات الاتصال</a
                ></span
              >
            </li>
            <li class="wd-nav-item">
              <i class="fa-solid fa-diagram-project"></i>
              <span
                ><a href="../flows.html" class="wd-nav-link">التدفقات</a></span
              >
            </li>
            <li class="wd-nav-item">
              <i class="fas fa-bullhorn"></i>
              <span
                ><a href="../campaigns.html" class="wd-nav-link"
                  >الحملات</a
                ></span
              >
            </li>
            <li class="wd-nav-item">
              <i class="fas fa-calendar"></i>
              <span
                ><a href="../calendar.html" class="wd-nav-link"
                  >التقويم</a
                ></span
              >
            </li>
            <li class="wd-nav-item">
              <i class="fas fa-file-alt"></i>
              <span
                ><a href="../contents.html" class="wd-nav-link"
                  >المحتويات</a
                ></span
              >
            </li>
            <li class="wd-nav-item">
              <i class="fas fa-code"></i>
              <span
                ><a href="../developers.html" class="wd-nav-link"
                  >المطورين</a
                ></span
              >
            </li>
            <li class="wd-nav-item">
              <i class="fas fa-cog"></i>
              <span
                ><a href="../settings.html" class="wd-nav-link"
                  >الإعدادات</a
                ></span
              >
            </li>
          </ul>
        </nav>
      </aside>

      <!-- القسم الثاني: القائمة الجانبية الثانية -->
      <div class="wd-secondary-sidebar">
        <div class="wd-account-switcher">
          <div class="wd-account-info">
            <img
              src="../imgs/logo.png"
              alt="صورة الحساب"
              class="wd-account-avatar"
            />
            <div class="wd-account-details">
              <span class="wd-account-name">حساب الشركة</span>
              <span class="wd-account-type">مدير</span>
            </div>
          </div>
          <button class="wd-account-switch">
            <i class="fas fa-exchange-alt"></i>
          </button>
        </div>
        <div class="wd-secondary-content">
          <nav class="wd-secondary-nav">
            <ul>
              <a href="../index.html" class="wd-nav-link">
                <li class="wd-secondary-nav-item">
                  <i class="fas fa-chart-pie"></i>
                  <span>نظرة عامة</span>
                </li>
              </a>
              <a href="../analytics/channels.html" class="wd-nav-link">
                <li class="wd-secondary-nav-item">
                  <i class="fas fa-broadcast-tower"></i>
                  <span>قنوات التواصل </span>
                </li>
              </a>
              <a href="../analytics/chat.html" class="wd-nav-link">
                <li class="wd-secondary-nav-item">
                  <i class="fas fa-comments"></i>
                  <span>المحادثات</span>
                </li>
              </a>
              <a href="../analytics/whatsapp.html" class="wd-nav-link">
                <li class="wd-secondary-nav-item">
                  <i class="fab fa-whatsapp"></i>
                  <span>احصائيات واتساب</span>
                </li>
              </a>
              <a href="../analytics/agents.html" class="wd-nav-link">
                <li class="wd-secondary-nav-item">
                  <i class="fas fa-users"></i>
                  <span>الموظفين</span>
                </li>
              </a>
              <a href="../analytics/teams.html" class="wd-nav-link">
                <li class="wd-secondary-nav-item">
                  <i class="fas fa-user-friends"></i>
                  <span>الفرق</span>
                </li>
              </a>
              <a href="../analytics/tags.html" class="wd-nav-link">
                <li class="wd-secondary-nav-item">
                  <i class="fas fa-tags"></i>
                  <span>الوسوم</span>
                </li>
              </a>
              <a href="../analytics/system-tags.html" class="wd-nav-link">
                <li class="wd-secondary-nav-item active">
                  <i class="fas fa-tags"></i>
                  <span>وسوم النظام</span>
                </li>
              </a>
              <a href="../analytics/system-stats.html" class="wd-nav-link">
                <li class="wd-secondary-nav-item">
                  <i class="fas fa-server"></i>
                  <span>إحصائيات النظام</span>
                </li>
              </a>
              <a href="../analytics/message-stats.html" class="wd-nav-link">
                <li class="wd-secondary-nav-item">
                  <i class="fas fa-envelope"></i>
                  <span>إحصائيات الرسائل</span>
                </li>
              </a>
              <a href="../analytics/contacts-stats.html" class="wd-nav-link">
                <li class="wd-secondary-nav-item">
                  <i class="fas fa-address-book"></i>
                  <span>إحصائيات جهات الاتصال</span>
                </li>
              </a>
              <a href="../analytics/comparison-stats.html" class="wd-nav-link">
                <li class="wd-secondary-nav-item">
                  <i class="fas fa-chart-line"></i>
                  <span>إحصائيات المقارنة</span>
                </li>
              </a>
              <a href="../analytics/channel-stats.html" class="wd-nav-link">
                <li class="wd-secondary-nav-item">
                  <i class="fas fa-broadcast-tower"></i>
                  <span>إحصائيات القنوات</span>
                </li>
              </a>
              <a href="../analytics/time-stats.html" class="wd-nav-link">
                <li class="wd-secondary-nav-item">
                  <i class="fas fa-clock"></i>
                  <span>إحصائيات النطاق الزمني</span>
                </li>
              </a>
              <a href="../analytics/reading-stats.html" class="wd-nav-link">
                <li class="wd-secondary-nav-item">
                  <i class="fas fa-eye"></i>
                  <span>إحصائيات القراءة</span>
                </li>
              </a>
              <a
                href="../analytics/weekly-performance.html"
                class="wd-nav-link"
              >
                <li class="wd-secondary-nav-item">
                  <i class="fas fa-chart-bar"></i>
                  <span>تقرير الأداء الأسبوعي</span>
                </li>
              </a>
              <a href="../analytics/ai-insights.html" class="wd-nav-link">
                <li class="wd-secondary-nav-item">
                  <i class="fas fa-robot"></i>
                  <span>التحليلات الذكية</span>
                </li>
              </a>
            </ul>
          </nav>
        </div>
      </div>

      <!-- القسم الثالث: المحتوى الرئيسي -->
      <div class="wd-main-content">
        <div class="wd-content-header">
          <div class="wd-header-left">
            <button
              class="wd-toggle-secondary"
              onclick="toggleSecondarySidebar()"
            >
              <i class="fas fa-bars"></i>
            </button>
            <h1>إحصائيات وسوم النظام</h1>
          </div>
        </div>

        <div class="wd-content-body">
          <!-- 1. إحصائيات وسم عميل -->
          <div class="performance-section">
            <div class="performance-title">وسم عميل</div>
            <div class="performance-stats">
              <div class="performance-stat-item">
                <div class="performance-stat-content">
                  <div class="performance-stat-label">
                    عدد مرات تحديث المتغير
                  </div>
                  <div class="performance-stat-value">387</div>
                </div>
              </div>
              <div class="performance-stat-item">
                <div class="performance-stat-content">
                  <div class="performance-stat-label">المبيعات</div>
                  <div class="performance-stat-value">$45,230</div>
                </div>
              </div>
              <div class="performance-stat-item">
                <div class="performance-stat-content">
                  <div class="performance-stat-label">معدل النمو</div>
                  <div class="performance-stat-value">+12.5%</div>
                </div>
              </div>
            </div>
            <div class="chart-container">
              <canvas id="customerChart"></canvas>
            </div>
          </div>

          <!-- 2. إحصائيات وسم مهتم/سلة متروكة -->
          <div class="performance-section">
            <div class="performance-title">وسم مهتم / سلة متروكة</div>
            <div class="performance-stats">
              <div class="performance-stat-item">
                <div class="performance-stat-content">
                  <div class="performance-stat-label">
                    عدد مرات تحديث المتغير
                  </div>
                  <div class="performance-stat-value">524</div>
                </div>
              </div>
              <div class="performance-stat-item">
                <div class="performance-stat-content">
                  <div class="performance-stat-label">
                    مجموع المبالغ المحتملة
                  </div>
                  <div class="performance-stat-value">$78,540</div>
                </div>
              </div>
              <div class="performance-stat-item">
                <div class="performance-stat-content">
                  <div class="performance-stat-label">معدل النمو</div>
                  <div class="performance-stat-value">+8.3%</div>
                </div>
              </div>
            </div>
            <div class="chart-container">
              <canvas id="interestedChart"></canvas>
            </div>
          </div>

          <!-- 3. إحصائيات وسم عميل مميز -->
          <div class="performance-section">
            <div class="performance-title">وسم عميل مميز</div>
            <div class="performance-stats">
              <div class="performance-stat-item">
                <div class="performance-stat-content">
                  <div class="performance-stat-label">
                    عدد مرات تحديث المتغير
                  </div>
                  <div class="performance-stat-value">156</div>
                </div>
              </div>
              <div class="performance-stat-item">
                <div class="performance-stat-content">
                  <div class="performance-stat-label">
                    نسبة العملاء المميزين
                  </div>
                  <div class="performance-stat-value">15.2%</div>
                </div>
              </div>
              <div class="performance-stat-item">
                <div class="performance-stat-content">
                  <div class="performance-stat-label">معدل النمو</div>
                  <div class="performance-stat-value">+18.7%</div>
                </div>
              </div>
            </div>
            <div class="chart-container">
              <canvas id="vipChart"></canvas>
            </div>
          </div>

          <!-- 4. إحصائيات وسم حجز موعد -->
          <div class="performance-section">
            <div class="performance-title">وسم حجز موعد</div>
            <div class="performance-stats">
              <div class="performance-stat-item">
                <div class="performance-stat-content">
                  <div class="performance-stat-label">
                    عدد مرات تحديث المتغير
                  </div>
                  <div class="performance-stat-value">243</div>
                </div>
              </div>
              <div class="performance-stat-item">
                <div class="performance-stat-content">
                  <div class="performance-stat-label">معدل النمو</div>
                  <div class="performance-stat-value">+22.4%</div>
                </div>
              </div>
            </div>
            <div class="chart-container">
              <canvas id="appointmentChart"></canvas>
            </div>
          </div>

          <!-- 5. إحصائيات العملاء الخاملون -->
          <div class="performance-section">
            <div class="performance-title">العملاء الخاملون</div>
            <div class="performance-stats">
              <div class="performance-stat-item">
                <div class="performance-stat-content">
                  <div class="performance-stat-label">عدد مرات الإضافة</div>
                  <div class="performance-stat-value">89 (+5.2%)</div>
                </div>
              </div>
              <div class="performance-stat-item">
                <div class="performance-stat-content">
                  <div class="performance-stat-label">عدد مرات الإزالة</div>
                  <div class="performance-stat-value">67 (-3.8%)</div>
                </div>
              </div>
              <div class="performance-stat-item">
                <div class="performance-stat-content">
                  <div class="performance-stat-label">
                    النسبة من مجموع العملاء
                  </div>
                  <div class="performance-stat-value danger">8.7%</div>
                </div>
              </div>
            </div>
            <div class="chart-container">
              <canvas id="inactiveChart"></canvas>
            </div>
          </div>

          <!-- 6. إحصائيات معدل نجاح التحويل -->
          <div class="performance-section">
            <div class="performance-title">معدل نجاح التحويل</div>
            <p style="color: #666; font-size: 14px; margin-bottom: 15px">
              المعدل لتحويل وسم مهتم/سلة متروكة إلى وسم عميل أو حجز موعد
            </p>
            <div class="performance-stats">
              <div class="performance-stat-item">
                <div class="performance-stat-content">
                  <div class="performance-stat-label">
                    عدد التحويلات الناجحة
                  </div>
                  <div class="performance-stat-value">198</div>
                </div>
              </div>
              <div class="performance-stat-item">
                <div class="performance-stat-content">
                  <div class="performance-stat-label">
                    النسبة من السلات المتروكة
                  </div>
                  <div class="performance-stat-value">37.8%</div>
                </div>
              </div>
              <div class="performance-stat-item">
                <div class="performance-stat-content">
                  <div class="performance-stat-label">معدل التحسن</div>
                  <div class="performance-stat-value">+15.3%</div>
                </div>
              </div>
            </div>
            <div class="chart-container">
              <canvas id="conversionChart"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="wd-profile-floating">
      <button class="wd-profile-floating-btn" id="profileFloatingBtn">
        <i class="fas fa-user"></i>
      </button>
      <div class="wd-profile-floating-menu" id="profileFloatingMenu">
        <div class="wd-profile-floating-header">
          <img
            src="../imgs/logo.png"
            alt="صورة المستخدم"
            class="wd-profile-floating-avatar"
          />
          <div class="wd-profile-floating-info">
            <span class="wd-profile-floating-name">اسم المستخدم</span>
            <span class="wd-profile-floating-email">user@example.com</span>
          </div>
        </div>
        <div class="wd-profile-floating-status">
          <span class="wd-profile-floating-status-title">تعيين نفسك ك:</span>
          <div class="wd-profile-floating-status-options">
            <button
              class="wd-profile-floating-status-option active"
              data-status="available"
            >
              <i class="fas fa-circle"></i>
              <span>متصل</span>
            </button>
            <button
              class="wd-profile-floating-status-option"
              data-status="busy"
            >
              <i class="fas fa-circle"></i>
              <span>مشغول</span>
            </button>
            <button
              class="wd-profile-floating-status-option"
              data-status="offline"
            >
              <i class="fas fa-circle"></i>
              <span>غير متصل</span>
            </button>
          </div>
        </div>
        <div class="wd-profile-floating-actions">
          <a href="#" class="wd-profile-floating-action">
            <i class="fas fa-user-cog"></i>
            <span>إعدادات الحساب</span>
          </a>
          <a href="#" class="wd-profile-floating-action">
            <i class="fas fa-palette"></i>
            <span>تغيير المظهر</span>
          </a>
          <a href="#" class="wd-profile-floating-action">
            <i class="fas fa-sign-out-alt"></i>
            <span>تسجيل الخروج</span>
          </a>
        </div>
      </div>
    </div>

    <script src="../script.js"></script>
    <script>
      // إنشاء الرسوم البيانية
      document.addEventListener("DOMContentLoaded", function () {
        // إعداد البيانات المشتركة
        const weekDays = [
          "السبت",
          "الأحد",
          "الاثنين",
          "الثلاثاء",
          "الأربعاء",
          "الخميس",
          "الجمعة",
        ];

        // خيارات الرسم البياني المشتركة
        const commonOptions = {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: "top",
              labels: {
                usePointStyle: true,
                padding: 15,
                font: {
                  size: 12,
                },
              },
            },
          },
          scales: {
            x: {
              grid: {
                display: false,
              },
            },
            y: {
              beginAtZero: true,
              grid: {
                color: "rgba(0, 0, 0, 0.05)",
              },
            },
          },
        };

        // 1. رسم بياني وسم عميل
        const customerCtx = document
          .getElementById("customerChart")
          .getContext("2d");
        new Chart(customerCtx, {
          type: "line",
          data: {
            labels: weekDays,
            datasets: [
              {
                label: "الأسبوع الحالي - عدد التحديثات",
                data: [48, 52, 58, 61, 55, 59, 54],
                borderColor: "#25d366",
                backgroundColor: "rgba(37, 211, 102, 0.1)",
                borderWidth: 3,
                fill: true,
                tension: 0.4,
              },
              {
                label: "الأسبوع الماضي - عدد التحديثات",
                data: [42, 45, 50, 48, 52, 49, 51],
                borderColor: "#95e1b9",
                backgroundColor: "rgba(149, 225, 185, 0.1)",
                borderWidth: 2,
                fill: true,
                tension: 0.4,
                borderDash: [5, 5],
              },
            ],
          },
          options: commonOptions,
        });

        // 2. رسم بياني وسم مهتم/سلة متروكة
        const interestedCtx = document
          .getElementById("interestedChart")
          .getContext("2d");
        new Chart(interestedCtx, {
          type: "line",
          data: {
            labels: weekDays,
            datasets: [
              {
                label: "الأسبوع الحالي - عدد التحديثات",
                data: [68, 75, 82, 78, 71, 85, 65],
                borderColor: "#ffc107",
                backgroundColor: "rgba(255, 193, 7, 0.1)",
                borderWidth: 3,
                fill: true,
                tension: 0.4,
              },
              {
                label: "الأسبوع الماضي - عدد التحديثات",
                data: [62, 68, 73, 70, 67, 75, 62],
                borderColor: "#ffd96f",
                backgroundColor: "rgba(255, 217, 111, 0.1)",
                borderWidth: 2,
                fill: true,
                tension: 0.4,
                borderDash: [5, 5],
              },
            ],
          },
          options: commonOptions,
        });

        // 3. رسم بياني وسم عميل مميز
        const vipCtx = document.getElementById("vipChart").getContext("2d");
        new Chart(vipCtx, {
          type: "line",
          data: {
            labels: weekDays,
            datasets: [
              {
                label: "الأسبوع الحالي - عدد التحديثات",
                data: [18, 22, 25, 23, 28, 21, 19],
                borderColor: "#9c27b0",
                backgroundColor: "rgba(156, 39, 176, 0.1)",
                borderWidth: 3,
                fill: true,
                tension: 0.4,
              },
              {
                label: "الأسبوع الماضي - عدد التحديثات",
                data: [15, 18, 19, 21, 20, 18, 17],
                borderColor: "#ce93d8",
                backgroundColor: "rgba(206, 147, 216, 0.1)",
                borderWidth: 2,
                fill: true,
                tension: 0.4,
                borderDash: [5, 5],
              },
            ],
          },
          options: commonOptions,
        });

        // 4. رسم بياني وسم حجز موعد
        const appointmentCtx = document
          .getElementById("appointmentChart")
          .getContext("2d");
        new Chart(appointmentCtx, {
          type: "line",
          data: {
            labels: weekDays,
            datasets: [
              {
                label: "الأسبوع الحالي - عدد التحديثات",
                data: [32, 38, 35, 41, 37, 28, 32],
                borderColor: "#2196f3",
                backgroundColor: "rgba(33, 150, 243, 0.1)",
                borderWidth: 3,
                fill: true,
                tension: 0.4,
              },
              {
                label: "الأسبوع الماضي - عدد التحديثات",
                data: [28, 31, 29, 33, 30, 25, 28],
                borderColor: "#90caf9",
                backgroundColor: "rgba(144, 202, 249, 0.1)",
                borderWidth: 2,
                fill: true,
                tension: 0.4,
                borderDash: [5, 5],
              },
            ],
          },
          options: commonOptions,
        });

        // 5. رسم بياني العملاء الخاملون
        const inactiveCtx = document
          .getElementById("inactiveChart")
          .getContext("2d");
        new Chart(inactiveCtx, {
          type: "bar",
          data: {
            labels: weekDays,
            datasets: [
              {
                label: "الأسبوع الحالي - إضافة",
                data: [12, 15, 11, 14, 13, 10, 14],
                backgroundColor: "rgba(220, 53, 69, 0.7)",
                borderColor: "#dc3545",
                borderWidth: 1,
              },
              {
                label: "الأسبوع الحالي - إزالة",
                data: [8, 10, 9, 11, 10, 8, 11],
                backgroundColor: "rgba(40, 167, 69, 0.7)",
                borderColor: "#28a745",
                borderWidth: 1,
              },
              {
                label: "الأسبوع الماضي - إضافة",
                data: [11, 12, 10, 13, 11, 9, 12],
                backgroundColor: "rgba(220, 53, 69, 0.3)",
                borderColor: "#dc3545",
                borderWidth: 1,
              },
              {
                label: "الأسبوع الماضي - إزالة",
                data: [9, 11, 10, 12, 11, 9, 10],
                backgroundColor: "rgba(40, 167, 69, 0.3)",
                borderColor: "#28a745",
                borderWidth: 1,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: "top",
                labels: {
                  usePointStyle: true,
                  padding: 15,
                  font: {
                    size: 12,
                  },
                },
              },
            },
            scales: {
              x: {
                grid: {
                  display: false,
                },
              },
              y: {
                beginAtZero: true,
                grid: {
                  color: "rgba(0, 0, 0, 0.05)",
                },
              },
            },
          },
        });

        // 6. رسم بياني معدل نجاح التحويل
        const conversionCtx = document
          .getElementById("conversionChart")
          .getContext("2d");
        new Chart(conversionCtx, {
          type: "line",
          data: {
            labels: weekDays,
            datasets: [
              {
                label: "الأسبوع الحالي - معدل التحويل (%)",
                data: [35.5, 37.2, 38.8, 39.1, 40.2, 36.8, 37.8],
                borderColor: "#4caf50",
                backgroundColor: "rgba(76, 175, 80, 0.1)",
                borderWidth: 3,
                fill: true,
                tension: 0.4,
              },
              {
                label: "الأسبوع الماضي - معدل التحويل (%)",
                data: [31.2, 32.8, 33.5, 34.1, 33.9, 32.5, 33.2],
                borderColor: "#a5d6a7",
                backgroundColor: "rgba(165, 214, 167, 0.1)",
                borderWidth: 2,
                fill: true,
                tension: 0.4,
                borderDash: [5, 5],
              },
            ],
          },
          options: commonOptions,
        });
      });
    </script>
  </body>
</html>
